<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reghype</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&family=Roboto&display=swap" rel="stylesheet">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<style>
/* –û–°–ù–û–í–ù–´–ï –°–¢–ò–õ–ò */
body { 
  margin:0; 
  font-family:'Roboto',sans-serif; 
  background: linear-gradient(135deg,#0d0d0d,#1a1a1a);
  color:#fff; 
  text-align:center; 
  overflow-x:hidden; 
}

h1 { 
  font-family:'Orbitron',sans-serif; 
  color:#ffcc00; 
  margin:20px 0; 
  cursor:pointer; 
  text-shadow:0 0 10px #ffcc00; 
}

button { 
  padding:12px 25px; 
  margin:10px; 
  border:none; 
  border-radius:12px;
  background: linear-gradient(45deg,#ff6600,#ffcc00); 
  font-weight:bold; 
  color:#000; 
  font-size:18px; 
  cursor:pointer; 
  transition:0.3s;
}

button:hover{
  transform:scale(1.05);
}

#currency{
  font-size:22px;
  margin:10px;
  color:#00ff99;
  font-weight:bold;
}

/* –ü–†–û–§–ò–õ–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø */
.profile-info {
  display: flex;
  align-items: center;
  justify-content: center;
  margin: 20px 0;
  gap: 15px;
}

.profile-avatar {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  border: 3px solid #ffcc00;
  object-fit: cover;
  cursor: pointer;
  transition: 0.3s;
}

.profile-avatar:hover {
  transform: scale(1.1);
  box-shadow: 0 0 15px rgba(255, 204, 0, 0.7);
}

.profile-name {
  font-size: 20px;
  color: #00ff99;
  font-weight: bold;
  cursor: pointer;
  transition: 0.3s;
}

.profile-name:hover {
  color: #ffcc00;
  text-shadow: 0 0 10px #ffcc00;
}

/* –ö–ê–†–¢–û–ß–ö–ò */
#lastCard .card {
  max-width: 150px;
  font-size: 16px;
  margin: 12px auto;
}

#lastCard .card img {
  max-width: 100%;
  height: auto;
  border-radius: 14px;
}

.card{
  display:inline-block; 
  margin:10px; 
  text-align:center; 
  transition:0.5s; 
  border-radius:12px; 
  padding:5px; 
  position:relative;
}

.card img{
  max-width:150px; 
  border-radius:12px; 
  transition:0.5s;
}

/* –†–ï–î–ö–û–°–¢–ò –ö–ê–†–¢–û–ß–ï–ö */
.rarity-Common{
  border:3px solid gray; 
  box-shadow:0 0 15px gray;
}

.rarity-Rare{
  border:3px solid #3399ff; 
  box-shadow:0 0 15px #3399ff; 
  animation:glowBlue 2s infinite alternate;
}

.rarity-Special{
  border:3px solid #cc33ff; 
  box-shadow:0 0 20px #cc33ff; 
  animation:glowPurple 2s infinite alternate;
}

.rarity-Legendary{
  border:3px solid gold; 
  box-shadow:0 0 25px gold; 
  animation:glowGold 2s infinite alternate;
}

@keyframes glowBlue{
  0%{box-shadow:0 0 15px #3399ff;}
  100%{box-shadow:0 0 30px #33f;}
}

@keyframes glowPurple{
  0%{box-shadow:0 0 15px #cc33ff;}
  100%{box-shadow:0 0 35px #f3f;}
}

@keyframes glowGold{
  0%{box-shadow:0 0 20px gold;}
  100%{box-shadow:0 0 40px #ff0;}
}

.animate-card{
  transform:scale(0) rotateY(0deg); 
  animation:popCard 0.8s forwards;
}

@keyframes popCard{
  0%{transform:scale(0) rotateY(0deg);opacity:0;}
  50%{transform:scale(1.3) rotateY(180deg);opacity:1;}
  100%{transform:scale(1) rotateY(360deg);opacity:1;}
}

.timer{
  font-size:16px;
  color:#ff6666;
  margin:10px;
}

#collection {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  margin-bottom: 80px;
  margin-top: 20px;
}

h2 {
  margin-top: 40px;
  margin-bottom: 25px;
  font-size: 24px;
  text-align: center;
}

/* –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ */
#adminPanel{
  position:fixed; 
  top:50px; 
  right:-400px; 
  width:360px; 
  background:#111; 
  border:2px solid #ffcc00; 
  border-radius:10px; 
  padding:20px; 
  transition:0.5s; 
  z-index:1000;
}

#adminPanel.show{
  right:20px;
}

#adminPanel h2{
  color:#ffcc00;
  margin-top:0;
  font-family:'Orbitron',sans-serif;
}

#adminPanel button{
  width:90%;
  margin:5px;
}

/* –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ö–ê–†–¢–û–ß–ö–ò */
#cardModal{
  display:none; 
  position:fixed; 
  top:0; 
  left:0; 
  width:100%; 
  height:100%; 
  background:rgba(0,0,0,0.85); 
  justify-content:center; 
  align-items:center; 
  z-index:2000;
}

#cardContent {
  background: #111;
  padding: 15px;
  border: 2px solid #ffcc00;
  border-radius: 12px;
  text-align: center;
  position: relative;
  max-width: 240px;
  transform: scale(0.9);
  animation: modalPop 0.4s forwards;
}

#cardContent img{
  max-width:100%;
  border-radius:12px;
  box-shadow:0 0 20px gold;
  margin-bottom:10px;
}

@keyframes modalPop{
  0%{transform:scale(0);}
  60%{transform:scale(1.2);}
  100%{transform:scale(1);}
}

#cardContent button{
  padding:8px 15px;
  margin-top:10px;
  border:none;
  border-radius:8px;
  background:#ff3333;
  color:#fff;
  cursor:pointer;
  transition:0.3s;
}

#cardContent button:hover{
  transform:scale(1.05);
}

/* –ù–ê–í–ë–ê–† */
#navbar {
  display: flex;
  justify-content: space-around;
  background: #111;
  padding: 15px 10px;
  border-top: 2px solid #ffcc00;
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 3000;
}

#navbar button {
  flex: 1;
  margin: 0 5px;
  padding: 12px 10px;
  background: linear-gradient(45deg,#ff6600,#ffcc00);
  border: none;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
  transition: 0.3s;
}

#navbar button:hover {
  transform: scale(1.05);
}

#navbar button.active {
  background: linear-gradient(45deg,#00ff99,#ffcc00);
  box-shadow: 0 0 15px rgba(0, 255, 153, 0.5);
}

/* –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê –ú–ï–ù–Æ */
.menu-modal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(5px);
  z-index: 4000;
  animation: fadeIn 0.3s ease-out;
}

.menu-content {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
  border: 3px solid #ffcc00;
  border-radius: 20px;
  padding: 30px;
  width: 90vw;
  max-width: 600px;
  max-height: 80vh;
  overflow-y: auto;
  box-shadow: 0 0 50px rgba(255, 204, 0, 0.3);
  animation: slideIn 0.4s ease-out;
}

.menu-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 25px;
  border-bottom: 2px solid #ffcc00;
  padding-bottom: 15px;
}

.menu-title {
  font-family: 'Orbitron', sans-serif;
  color: #ffcc00;
  font-size: 28px;
  text-shadow: 0 0 10px #ffcc00;
  margin: 0;
}

.close-btn {
  background: none;
  border: none;
  color: #ff3333;
  font-size: 32px;
  cursor: pointer;
  transition: 0.3s;
  padding: 5px 10px;
  border-radius: 50%;
}

.close-btn:hover {
  background: rgba(255, 51, 51, 0.2);
  transform: rotate(90deg);
}

@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideIn {
  from { 
    opacity: 0;
    transform: translate(-50%, -60%);
  }
  to { 
    opacity: 1;
    transform: translate(-50%, -50%);
  }
}

/* –°–¢–ò–õ–ò –î–õ–Ø –ö–û–¢–ò–ö–ê */
.cat-container {
  display: inline-block;
  margin: 20px;
  cursor: pointer;
  transition: transform 0.2s;
}

.cat-container:hover {
  transform: scale(1.05);
}

.cat-container:active {
  transform: scale(0.95);
}

#catVideo {
  width: 200px;
  height: 200px;
  border-radius: 15px;
  border: 3px solid #ffcc00;
  box-shadow: 0 0 20px rgba(255, 204, 0, 0.5);
  object-fit: cover;
}

.click-effect {
  animation: clickPulse 0.3s ease-out;
}

@keyframes clickPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}

/* –°–¢–ò–õ–ò –ü–†–û–§–ò–õ–Ø */
.profile-section {
  background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
  border: 2px solid #ffcc00;
  border-radius: 15px;
  padding: 20px;
  margin: 20px;
  max-width: 500px;
  margin: 20px auto;
}

.profile-header {
  display: flex;
  align-items: center;
  gap: 20px;
  margin-bottom: 20px;
}

.profile-avatar-large {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  border: 3px solid #ffcc00;
  object-fit: cover;
  cursor: pointer;
  transition: 0.3s;
}

.profile-avatar-large:hover {
  transform: scale(1.1);
  box-shadow: 0 0 20px rgba(255, 204, 0, 0.7);
}

.profile-details h3 {
  color: #ffcc00;
  margin: 0 0 10px 0;
  font-family: 'Orbitron', sans-serif;
}

.profile-stats {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 15px;
  text-align: center;
}

.stat-item {
  background: rgba(255, 204, 0, 0.1);
  padding: 15px;
  border-radius: 10px;
  border: 1px solid rgba(255, 204, 0, 0.3);
}

.stat-value {
  font-size: 24px;
  font-weight: bold;
  color: #00ff99;
  display: block;
}

.stat-label {
  color: #ccc;
  font-size: 14px;
}

.profile-actions {
  display: flex;
  gap: 10px;
  justify-content: center;
  margin-top: 20px;
}

.profile-actions button {
  padding: 10px 20px;
  font-size: 14px;
}

/* –°–∫—Ä—ã—Ç—ã–π input –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤ */
#avatarInput {
  display: none;
}

/* –ö–æ–ª–ª–µ–∫—Ü–∏—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ */
.profile-collection {
  margin-top: 30px;
  border-top: 2px solid #ffcc00;
  padding-top: 20px;
}

.collection-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
  gap: 10px;
  max-height: 400px;
  overflow-y: auto;
}

.collection-card {
  aspect-ratio: 1;
  border: 2px solid #666;
  border-radius: 8px;
  overflow: hidden;
  transition: 0.3s;
  pointer-events: none; /* –î–µ–ª–∞–µ–º –∫–∞—Ä—Ç–æ—á–∫–∏ –Ω–µ–∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–º–∏ */
}

.collection-card:hover {
  transform: scale(1.05);
}

.collection-card img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

/* –ö–ê–°–¢–û–ú–ù–´–ô –ú–û–î–ê–õ–¨–ù–´–ô –î–ò–ê–õ–û–ì –î–õ–Ø –°–ú–ï–ù–´ –ò–ú–ï–ù–ò */
#nameModal {
  display: none;
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.8);
  justify-content: center;
  align-items: center;
  z-index: 5000;
}

.name-content {
  background: linear-gradient(135deg, #1a1a1a, #2d2d2d);
  border: 3px solid #ffcc00;
  border-radius: 15px;
  padding: 25px;
  text-align: center;
  max-width: 400px;
  animation: modalPop 0.4s forwards;
}

.name-content h3 {
  color: #ffcc00;
  margin-bottom: 20px;
  font-family: 'Orbitron', sans-serif;
}

.name-content input {
  width: 100%;
  padding: 12px;
  border: 2px solid #ffcc00;
  border-radius: 8px;
  background: #111;
  color: #fff;
  font-size: 16px;
  margin-bottom: 20px;
}

.name-content input:focus {
  outline: none;
  box-shadow: 0 0 10px rgba(255, 204, 0, 0.5);
}

.name-actions {
  display: flex;
  gap: 10px;
  justify-content: center;
}

.name-actions button {
  padding: 10px 20px;
  margin: 0;
}

/* –õ–ò–î–ï–†–ë–û–†–î –° –ü–†–û–ö–†–£–¢–ö–û–ô */
.leaderboard-container {
  max-height: 400px;
  overflow-y: auto;
  padding-right: 10px;
}

.leader-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 15px;
  margin: 10px 0;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 10px;
  border: 1px solid #333;
  cursor: pointer;
  transition: 0.3s;
}

.leader-item:hover {
  background: rgba(255, 204, 0, 0.1);
  border-color: #ffcc00;
  transform: translateX(5px);
}

.leader-item.current-player {
  background: rgba(255, 204, 0, 0.2);
  border-color: #ffcc00;
}

.leader-info {
  text-align: left;
}

.leader-name {
  font-weight: bold;
  color: #fff;
  margin-bottom: 5px;
}

.leader-stats {
  font-size: 14px;
  color: #ccc;
}

.leader-rank {
  font-size: 24px;
}

/* –ü–†–û–§–ò–õ–¨ –î–†–£–ì–û–ì–û –ò–ì–†–û–ö–ê */
.other-profile-section {
  background: linear-gradient(135deg, #2a2a2a, #1a1a1a);
  border: 2px solid #00ff99;
  border-radius: 15px;
  padding: 20px;
  margin: 20px auto;
  max-width: 500px;
}
</style>
</head>
<body>

<h1 id="logo">Reghype</h1>

<!-- –ü–†–û–§–ò–õ–¨ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø -->
<div class="profile-info">
  <img id="profileAvatar" class="profile-avatar" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMzAiIGN5PSIzMCIgcj0iMzAiIGZpbGw9IiNmZmNjMDAiLz4KPGZ0ZXh0IHg9IjMwIiB5PSI0MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjI0IiBmaWxsPSIjMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7wn5CCPC90ZXh0Pgo8L3N2Zz4K" alt="–ê–≤–∞—Ç–∞—Ä" onclick="openProfile()">
  <div class="profile-name" id="profileName" onclick="openProfile()">–ò–≥—Ä–æ–∫</div>
</div>

<div id="currency">üí∞ –í–∞–ª—é—Ç–∞: 100 –º–æ–Ω–µ—Ç</div>
<button onclick="openPack()">üéÅ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–∞–∫</button>
<button onclick="buyPack()">üíé –ö—É–ø–∏—Ç—å –ø–∞–∫ (50 –º–æ–Ω–µ—Ç)</button>
<p class="timer" id="timer"></p>
<div id="lastCard"></div>
<h2>–ú–æ—è –∫–æ–ª–ª–µ–∫—Ü–∏—è</h2>
<div id="collection"></div>

<!-- –°–ö–†–´–¢–´–ï –≠–õ–ï–ú–ï–ù–¢–´ -->
<input type="file" id="avatarInput" accept="image/*" onchange="handleAvatarUpload(event)">

<!-- –°–ß–ï–¢–ß–ò–ö –ö–õ–ò–ö–û–í –î–õ–Ø –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–ò (—Å–∫—Ä—ã—Ç—ã–π) -->
<div id="adminClickCounter" style="display: none;"></div>

<!-- –ê–î–ú–ò–ù –ü–ê–ù–ï–õ–¨ -->
<div id="adminPanel">
<h2>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h2>
<button onclick="GameManager.admin.addCurrency(100)">üí∞ –î–æ–±–∞–≤–∏—Ç—å 100 –º–æ–Ω–µ—Ç</button>
<button onclick="GameManager.admin.resetCollection()">üóë –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–ª–ª–µ–∫—Ü–∏—é</button>
<button onclick="GameManager.admin.resetTimer()">‚è∞ –°–±—Ä–æ—Å–∏—Ç—å —Ç–∞–π–º–µ—Ä</button>
</div>

<!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –ö–ê–†–¢–û–ß–ö–ò -->
<div id="cardModal">
  <div id="cardContent">
    <img id="modalImage" src="">
    <h2 id="modalName"></h2>
    <p id="modalRarity"></p>	
    <p id="modalType"></p>
    <button id="sellCardBtn">üí∞ –ü—Ä–æ–¥–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É</button>
  </div>
</div>

<!-- –ú–û–î–ê–õ–¨–ù–û–ï –û–ö–ù–û –°–ú–ï–ù–´ –ò–ú–ï–ù–ò -->
<div id="nameModal">
  <div class="name-content">
    <h3>–°–º–µ–Ω–∞ –∏–º–µ–Ω–∏</h3>
    <input type="text" id="nameInput" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–æ–≤–æ–µ –∏–º—è" maxlength="20">
    <div class="name-actions">
      <button onclick="confirmNameChange()">‚úÖ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <button onclick="closeNameModal()" style="background: linear-gradient(45deg,#ff3333,#ff6666);">‚ùå –û—Ç–º–µ–Ω–∞</button>
    </div>
  </div>
</div>

<!-- –ù–ê–í–ë–ê–† -->
<div id="navbar">
  <button onclick="MenuManager.toggle('profile')">üë§ –ü—Ä–æ—Ñ–∏–ª—å</button>
  <button onclick="MenuManager.toggle('clicker')">üñ± –ö–ª–∏–∫–∞–ª–∫–∞</button>
  <button onclick="MenuManager.toggle('packs')">üéÅ –ü–∞–∫–∏</button>
  <button onclick="MenuManager.toggle('leaderboard')">üèÜ –¢–æ–ø</button>
</div>

<!-- –ú–û–î–ê–õ–¨–ù–´–ï –û–ö–ù–ê –ú–ï–ù–Æ -->
<div id="profileModal" class="menu-modal">
  <div class="menu-content">
    <div class="menu-header">
      <h2 class="menu-title">üë§ –ü—Ä–æ—Ñ–∏–ª—å</h2>
      <button class="close-btn" onclick="MenuManager.close('profile')">&times;</button>
    </div>
    <div class="profile-section" id="currentPlayerProfile">
      <div class="profile-header">
        <img id="profileAvatarLarge" class="profile-avatar-large" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMzAiIGN5PSIzMCIgcj0iMzAiIGZpbGw9IiNmZmNjMDAiLz4KPGZ0ZXh0IHg9IjMwIiB5PSI0MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjI0IiBmaWxsPSIjMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7wn5CCPC90ZXh0Pgo8L3N2Zz4K" alt="–ê–≤–∞—Ç–∞—Ä" onclick="changeAvatar()">
        <div class="profile-details">
          <h3 id="profileNameLarge">–ò–≥—Ä–æ–∫</h3>
          <div class="profile-stats">
            <div class="stat-item">
              <span class="stat-value" id="profileCurrency">100</span>
              <span class="stat-label">–ú–æ–Ω–µ—Ç</span>
            </div>
            <div class="stat-item">
              <span class="stat-value" id="profileCards">0</span>
              <span class="stat-label">–ö–∞—Ä—Ç–æ—á–µ–∫</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="profile-actions">
        <button onclick="showNameModal()">‚úèÔ∏è –°–º–µ–Ω–∏—Ç—å –∏–º—è</button>
        <button onclick="changeAvatar()">üñºÔ∏è –°–º–µ–Ω–∏—Ç—å –∞–≤–∞—Ç–∞—Ä</button>
      </div>
      
      <div class="profile-collection">
        <h3>–ö–æ–ª–ª–µ–∫—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫</h3>
        <div id="profileCollectionGrid" class="collection-grid"></div>
      </div>
    </div>
    
    <!-- –ü—Ä–æ—Ñ–∏–ª—å –¥—Ä—É–≥–æ–≥–æ –∏–≥—Ä–æ–∫–∞ -->
    <div class="other-profile-section" id="otherPlayerProfile" style="display: none;">
      <button onclick="showCurrentProfile()" style="margin-bottom: 15px;">üîô –ù–∞–∑–∞–¥ –∫ –º–æ–µ–º—É –ø—Ä–æ—Ñ–∏–ª—é</button>
      <div class="profile-header">
        <img id="otherProfileAvatar" class="profile-avatar-large" src="" alt="–ê–≤–∞—Ç–∞—Ä">
        <div class="profile-details">
          <h3 id="otherProfileName">–ò–≥—Ä–æ–∫</h3>
          <div class="profile-stats">
            <div class="stat-item">
              <span class="stat-value" id="otherProfileCurrency">0</span>
              <span class="stat-label">–ú–æ–Ω–µ—Ç</span>
            </div>
            <div class="stat-item">
              <span class="stat-value" id="otherProfileCards">0</span>
              <span class="stat-label">–ö–∞—Ä—Ç–æ—á–µ–∫</span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="profile-collection">
        <h3>–ö–æ–ª–ª–µ–∫—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫</h3>
        <div id="otherProfileCollectionGrid" class="collection-grid"></div>
      </div>
    </div>
  </div>
</div>

<div id="clickerModal" class="menu-modal">
  <div class="menu-content">
    <div class="menu-header">
      <h2 class="menu-title">üñ± –ö–ª–∏–∫–∞–ª–∫–∞</h2>
      <button class="close-btn" onclick="MenuManager.close('clicker')">&times;</button>
    </div>
    <p>–ù–∞–∂–∏–º–∞–π –Ω–∞ –∫–æ—Ç–∏–∫–∞ –∏ –∑–∞—Ä–∞–±–∞—Ç—ã–≤–∞–π –º–æ–Ω–µ—Ç—ã!</p>
    <div class="cat-container" onclick="ClickerManager.earnClick()">
      <video id="catVideo" muted preload="auto">
        <source src="cat_petting.mp4" type="video/mp4">
        –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
      </video>
    </div>
    <p id="energyDisplay">‚ö° –≠–Ω–µ—Ä–≥–∏—è: 50/50</p>
  </div>
</div>

<div id="packsModal" class="menu-modal">
  <div class="menu-content">
    <div class="menu-header">
      <h2 class="menu-title">üéÅ –ú–∞–≥–∞–∑–∏–Ω –ø–∞–∫–æ–≤</h2>
      <button class="close-btn" onclick="MenuManager.close('packs')">&times;</button>
    </div>
    <button onclick="PackManager.buyCommonPack()" style="width: 100%; margin: 10px 0; padding: 15px;">üü¶ –û–±—ã—á–Ω—ã–π –ø–∞–∫ (30 –º–æ–Ω–µ—Ç)</button>
    <button onclick="PackManager.buyRarePack()" style="width: 100%; margin: 10px 0; padding: 15px;">üü© –†–µ–¥–∫–∏–π –ø–∞–∫ (100 –º–æ–Ω–µ—Ç)</button>
    <button onclick="PackManager.buyLegendaryPack()" style="width: 100%; margin: 10px 0; padding: 15px;">üü® –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –ø–∞–∫ (300 –º–æ–Ω–µ—Ç)</button>
  </div>
</div>

<div id="leaderboardModal" class="menu-modal">
  <div class="menu-content">
    <div class="menu-header">
      <h2 class="menu-title">üèÜ –¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤</h2>
      <button class="close-btn" onclick="MenuManager.close('leaderboard')">&times;</button>
    </div>
    <div id="leaderboardContent" class="leaderboard-container"></div>
  </div>
</div>

<script>
// FIREBASE –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø
const firebaseConfig = {
  apiKey: "AIzaSyBIPugjKSmRvbDNFS_7ClFkbjlb8zfugXM",
  authDomain: "regcandy-74da6.firebaseapp.com",
  databaseURL: "https://regcandy-74da6-default-rtdb.firebaseio.com",
  projectId: "regcandy-74da6",
  storageBucket: "regcandy-74da6.appspot.com",
  messagingSenderId: "486732872284",
  appId: "1:486732872284:web:9621ddfb253c03ccd98499"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

// –ö–ê–†–¢–û–ß–ö–ò
const cards=[
  {name:"Reghype",rarity:"Special",type:"Twitch",image:"cards/Regcandy.png", tgLink:"https://t.me/reghypearchive/2"},
  {name:"DistrsAI",rarity:"Special",type:"Twitch",image:"cards/DistrsAI.png", tgLink:"https://t.me/reghypearchive/3"},
  {name:"Demogorgon",rarity:"Legendary",type:"Moder",image:"cards/Demogorgon.png", tgLink:"https://t.me/reghypearchive/4"},
  {name:"Apelsinka",rarity:"Legendary",type:"Moder",image:"cards/Apelsinka.png", tgLink:"https://t.me/reghypearchive/5"},
  {name:"Freddy Fuzbear",rarity:"Rare",type:"Chaters",image:"cards/Freddy.png", tgLink:"https://t.me/reghypearchive/6"},
  {name:"Bonnie",rarity:"Rare",type:"Chaters",image:"cards/Bonnie.png", tgLink:"https://t.me/reghypearchive/7"},
  {name:"Mark",rarity:"Rare",type:"Chaters",image:"cards/Mark.png", tgLink:"https://t.me/reghypearchive/8"},
  {name:"Anton Fazbear",rarity:"Common",type:"Chaters",image:"cards/Anton.png", tgLink:"https://t.me/reghypearchive/9"},
  {name:"–†–æ–Ω–∏",rarity:"Common",type:"Chaters",image:"cards/Roni.png", tgLink:"https://t.me/reghypearchive/10"},
  {name:"Neatexq",rarity:"Rare",type:"Chaters",image:"cards/Neatexq.png", tgLink:"https://t.me/reghypearchive/11"},
  {name:"Foxy",rarity:"Rare",type:"Chaters",image:"cards/Foxy.png", tgLink:"https://t.me/reghypearchive/12"},
  {name:"Andrew",rarity:"Common",type:"Chaters",image:"cards/Andrew.png", tgLink:"https://t.me/reghypearchive/13"},
  {name:"Che–±—Én–µ–ª—è",rarity:"Common",type:"Chaters",image:"cards/Chebunela.png", tgLink:"https://t.me/reghypearchive/14"},
  {name:"–ê–ª—ç—Ö",rarity:"Rare",type:"Chaters",image:"cards/Alex.png", tgLink:"https://t.me/reghypearchive/15"},
  {name:"Foxy Skin",rarity:"Special",type:"Skin",image:"cards/Foxy-Skin.png", tgLink:"https://t.me/reghypearchive/16"},
  {name:"Demogorgon Skin",rarity:"Special",type:"Skin",image:"cards/Demogorgon-Skin.png", tgLink:"https://t.me/reghypearchive/17"},
  {name:"Freddy Skin",rarity:"Special",type:"Skin",image:"cards/Freddy-Skin.png", tgLink:"https://t.me/reghypearchive/18"},
  {name:"X06R",rarity:"Common",type:"Chaters",image:"cards/X06R.png", tgLink:"https://t.me/reghypearchive/19"}
];

// –°–õ–£–ß–ê–ô–ù–´–ï –ò–ú–ï–ù–ê
const randomNames = [
  "–ö—Ä—É—Ç–æ–π–ò–≥—Ä–æ–∫", "–ú–µ–≥–∞–ì–µ–π–º–µ—Ä", "–õ–µ–≥–µ–Ω–¥–∞–ü–∞–∫–æ–≤", "–ö–∞—Ä—Ç–æ–†—ã—Ü–∞—Ä—å", "–°—É–ø–µ—Ä–ö–æ–ª–ª–µ–∫—Ç–æ—Ä",
  "–ü–∞–∫–æ–ú–∞–Ω", "–ö–∞—Ä—Ç–æ—á–Ω—ã–π–ö–æ—Ä–æ–ª—å", "–ì—Ä–æ–∑–∞–ü–∞–∫–æ–≤", "–ú–∞—Å—Ç–µ—Ä–ö–∞—Ä—Ç", "–õ—É—á—à–∏–π–ò–≥—Ä–æ–∫",
  "–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–ì–µ–π–º–µ—Ä", "–ö—Ä—É—Ç–æ–π–î–∂–æ–∫–µ—Ä", "–ü—Ä–æ—Ñ–∏–ü–∞–∫–µ—Ä", "–ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π–ò–≥—Ä–æ–∫", "–£–ª—å—Ç—Ä–∞–ö–æ–ª–ª–µ–∫—Ç–æ—Ä"
];

// –û–°–ù–û–í–ù–û–ô –ú–ï–ù–ï–î–ñ–ï–† –ò–ì–†–´
class GameManager {
  constructor() {
    this.data = {
      collection: JSON.parse(localStorage.getItem('collection')) || [],
      currency: parseInt(localStorage.getItem('currency')) || 100,
      lastFreePack: parseInt(localStorage.getItem('lastFreePack')) || 0,
      playerName: localStorage.getItem('playerName') || this.generateRandomName(),
      playerAvatar: localStorage.getItem('playerAvatar') || this.getDefaultAvatar(),
      energy: parseInt(localStorage.getItem('energy')) || 50
    };
    
    this.constants = {
      packCooldown: 4 * 3600 * 1000,
      maxEnergy: 50,
      regenTime: 5000
    };

    // –î–ª—è –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏
    this.adminClickSequence = [];
    this.adminSequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'KeyB', 'KeyA'];
    
    this.init();
  }
  
  generateRandomName() {
    return randomNames[Math.floor(Math.random() * randomNames.length)];
  }
  
  getDefaultAvatar() {
    return "data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMzAiIGN5PSIzMCIgcj0iMzAiIGZpbGw9IiNmZmNjMDAiLz4KPGZ0ZXh0IHg9IjMwIiB5PSI0MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjI0IiBmaWxsPSIjMDAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj7wn5CCPC90ZXh0Pgo8L3N2Zz4K";
  }
  
  init() {
    this.updateUI();
    this.startTimer();
    this.startEnergyRegen();
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
    document.addEventListener('click', (e) => {
      if (e.target.id === 'cardModal') {
        this.closeCardModal();
      }
    });

    // –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å —á–µ—Ä–µ–∑ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É (Konami Code)
    document.addEventListener('keydown', (e) => {
      this.adminClickSequence.push(e.code);
      if (this.adminClickSequence.length > this.adminSequence.length) {
        this.adminClickSequence.shift();
      }
      
      if (JSON.stringify(this.adminClickSequence) === JSON.stringify(this.adminSequence)) {
        document.getElementById('adminPanel').classList.toggle('show');
        this.adminClickSequence = [];
      }
    });
    
    // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥)
    setInterval(() => {
      if (MenuManager.activeMenu === 'leaderboard') {
        this.loadLeaderboard();
      }
    }, 30000);
  }
  
  updateUI() {
    document.getElementById('currency').textContent = `üí∞ –í–∞–ª—é—Ç–∞: ${this.data.currency} –º–æ–Ω–µ—Ç`;
    document.getElementById('profileName').textContent = this.data.playerName;
    document.getElementById('profileNameLarge').textContent = this.data.playerName;
    document.getElementById('profileCurrency').textContent = this.data.currency;
    document.getElementById('profileCards').textContent = this.data.collection.length;
    document.getElementById('energyDisplay').textContent = `‚ö° –≠–Ω–µ—Ä–≥–∏—è: ${this.data.energy}/${this.constants.maxEnergy}`;
    
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤–∞—Ç–∞—Ä–æ–≤
    document.getElementById('profileAvatar').src = this.data.playerAvatar;
    document.getElementById('profileAvatarLarge').src = this.data.playerAvatar;
    
    this.displayCollection();
    this.displayProfileCollection();
  }
  
  displayCollection() {
    const collection = document.getElementById('collection');
    collection.innerHTML = '';
    
    this.data.collection.forEach((card, index) => {
      const cardDiv = document.createElement('div');
      cardDiv.className = `card rarity-${card.rarity}`;
      cardDiv.innerHTML = `
        <img src="${card.image}" alt="${card.name}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDE1MCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxNTAiIGhlaWdodD0iMjAwIiBmaWxsPSIjMzMzIi8+Cjx0ZXh0IHg9Ijc1IiB5PSIxMDAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+–ö–∞—Ä—Ç–æ—á–∫–∞</text+Cjwvc3ZnPgo='">
        <div>${card.name}</div>
      `;
      cardDiv.addEventListener('click', () => this.showCardModal(card, index));
      collection.appendChild(cardDiv);
    });
  }
  
  displayProfileCollection() {
    const grid = document.getElementById('profileCollectionGrid');
    grid.innerHTML = '';
    
    this.data.collection.forEach((card, index) => {
      const cardDiv = document.createElement('div');
      cardDiv.className = `collection-card rarity-${card.rarity}`;
      cardDiv.innerHTML = `<img src="${card.image}" alt="${card.name}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjMzMzIi8+Cjx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5–ö–∞—Ä—Ç–∞</text+Cjwvc3ZnPgo='">`;
      
      // –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 1: –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ –≤ –ø—Ä–æ—Ñ–∏–ª–µ
      cardDiv.addEventListener('click', (e) => {
        e.stopPropagation();
        this.showCardModal(card, index);
      });
      
      grid.appendChild(cardDiv);
    });
  }

  // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –¥—Ä—É–≥–æ–≥–æ –∏–≥—Ä–æ–∫–∞
  displayOtherPlayerCollection(player) {
    const grid = document.getElementById('otherProfileCollectionGrid');
    grid.innerHTML = '';
    
    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏ –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –∏–≥—Ä–æ–∫–∞
    const otherPlayerCards = [];
    const numCards = player.cards;
    
    for (let i = 0; i < numCards; i++) {
      const randomCard = cards[Math.floor(Math.random() * cards.length)];
      otherPlayerCards.push(randomCard);
    }
    
    otherPlayerCards.forEach((card, index) => {
      const cardDiv = document.createElement('div');
      cardDiv.className = `collection-card rarity-${card.rarity}`;
      cardDiv.innerHTML = `<img src="${card.image}" alt="${card.name}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjMzMzIi8+Cjx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjEwIiBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj+–ö–∞—Ä—Ç–∞</text+Cjwvc3ZnPgo='">`;
      
      // –î–ª—è —á—É–∂–∏—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é (–±–µ–∑ –ø—Ä–æ–¥–∞–∂–∏)
      cardDiv.addEventListener('click', (e) => {
        e.stopPropagation();
        this.showCardModal(card, -1, true); // -1 –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ –∫–∞—Ä—Ç–æ—á–∫–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ–¥–∞–Ω–∞
      });
      
      grid.appendChild(cardDiv);
    });
  }
  
  showCardModal(card, index, isOtherPlayer = false) {
    const modal = document.getElementById('cardModal');
    document.getElementById('modalImage').src = card.image;
    document.getElementById('modalName').textContent = card.name;
    document.getElementById('modalRarity').textContent = `–†–µ–¥–∫–æ—Å—Ç—å: ${card.rarity}`;
    document.getElementById('modalType').textContent = `–¢–∏–ø: ${card.type}`;
    
    const sellBtn = document.getElementById('sellCardBtn');
    if (isOtherPlayer || index === -1) {
      sellBtn.style.display = 'none';
    } else {
      sellBtn.style.display = 'block';
      sellBtn.onclick = () => this.sellCard(index);
    }
    
    modal.style.display = 'flex';
  }
  
  closeCardModal() {
    document.getElementById('cardModal').style.display = 'none';
  }
  
  sellCard(index) {
    const card = this.data.collection[index];
    const prices = { Common: 10, Rare: 30, Special: 75, Legendary: 150 };
    const price = prices[card.rarity] || 10;
    
    this.data.currency += price;
    this.data.collection.splice(index, 1);
    this.saveData();
    this.updateUI();
    this.closeCardModal();
    
    this.showNotification(`–ü—Ä–æ–¥–∞–Ω–æ –∑–∞ ${price} –º–æ–Ω–µ—Ç!`);
  }
  
  openPack(packType = 'free') {
    if (packType === 'free') {
      const now = Date.now();
      if (now - this.data.lastFreePack < this.constants.packCooldown) {
        this.showNotification('–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–∞–∫ –µ—â–µ –Ω–µ –≥–æ—Ç–æ–≤!');
        return;
      }
      this.data.lastFreePack = now;
    } else if (packType === 'paid') {
      if (this.data.currency < 50) {
        this.showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!');
        return;
      }
      this.data.currency -= 50;
    }
    
    const newCard = this.generateRandomCard();
    this.data.collection.push(newCard);
    this.saveData();
    this.displayNewCard(newCard);
    this.updateUI();
  }
  
  generateRandomCard(rarityBonus = 0) {
    const rarityWeights = {
      Common: 60 - rarityBonus,
      Rare: 30,
      Special: 8 + rarityBonus / 2,
      Legendary: 2 + rarityBonus / 2
    };
    
    const totalWeight = Object.values(rarityWeights).reduce((a, b) => a + b, 0);
    let random = Math.random() * totalWeight;
    
    let selectedRarity = 'Common';
    for (const [rarity, weight] of Object.entries(rarityWeights)) {
      random -= weight;
      if (random <= 0) {
        selectedRarity = rarity;
        break;
      }
    }
    
    const cardsOfRarity = cards.filter(card => card.rarity === selectedRarity);
    return cardsOfRarity[Math.floor(Math.random() * cardsOfRarity.length)];
  }
  
  displayNewCard(card) {
    const lastCard = document.getElementById('lastCard');
    lastCard.innerHTML = `
      <div class="card rarity-${card.rarity} animate-card">
        <img src="${card.image}" alt="${card.name}" onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDE1MCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxNTAiIGhlaWdodD0iMjAwIiBmaWxsPSIjMzMzIi8+Cjx0ZXh0IHg9Ijc1IiB5PSIxMDAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSI+–ö–∞—Ä—Ç–æ—á–∫–∞</text+Cjwvc3ZnPgo='">
        <div>${card.name}</div>
      </div>
    `;
  }
  
  startTimer() {
    setInterval(() => {
      const now = Date.now();
      const timeLeft = this.constants.packCooldown - (now - this.data.lastFreePack);
      
      if (timeLeft <= 0) {
        document.getElementById('timer').textContent = 'üéÅ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–∞–∫ –≥–æ—Ç–æ–≤!';
      } else {
        const hours = Math.floor(timeLeft / 3600000);
        const minutes = Math.floor((timeLeft % 3600000) / 60000);
        const seconds = Math.floor((timeLeft % 60000) / 1000);
        document.getElementById('timer').textContent = 
          `‚è∞ –î–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–≥–æ –ø–∞–∫–∞: ${hours}:${minutes.toString().padStart(2,'0')}:${seconds.toString().padStart(2,'0')}`;
      }
    }, 1000);
  }
  
  startEnergyRegen() {
    setInterval(() => {
      if (this.data.energy < this.constants.maxEnergy) {
        this.data.energy++;
        this.saveData();
        this.updateUI();
      }
    }, this.constants.regenTime);
  }
  
  showNotification(text) {
    const notification = document.createElement('div');
    notification.style.cssText = `
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(45deg, #ff6600, #ffcc00);
      color: #000;
      padding: 15px 30px;
      border-radius: 10px;
      font-weight: bold;
      z-index: 5000;
      animation: slideDown 0.5s ease-out;
    `;
    notification.textContent = text;
    document.body.appendChild(notification);
    
    setTimeout(() => {
      notification.remove();
    }, 3000);
  }
  
  saveData() {
    Object.entries(this.data).forEach(([key, value]) => {
      localStorage.setItem(key, typeof value === 'object' ? JSON.stringify(value) : value);
    });
  }
  
  // –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 4: –£–ª—É—á—à–µ–Ω–Ω—ã–π –ª–∏–¥–µ—Ä–±–æ—Ä–¥ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
  loadLeaderboard() {
    // –°–æ–∑–¥–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ç–æ–ª—å–∫–æ —Å —Ç–µ–∫—É—â–∏–º –∏–≥—Ä–æ–∫–æ–º
    const leaders = [{
      name: this.data.playerName,
      cards: this.data.collection.length,
      currency: this.data.currency,
      avatar: this.data.playerAvatar,
      isCurrentPlayer: true
    }];
    
    // –°–æ—Ä—Ç–∏—Ä—É–µ–º (—Ö–æ—Ç—è –ø–æ–∫–∞ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∏–≥—Ä–æ–∫)
    leaders.sort((a, b) => b.cards - a.cards || b.currency - a.currency);
    
    const content = document.getElementById('leaderboardContent');
    content.innerHTML = leaders.map((player, index) => {
      const rankEmoji = index === 0 ? 'ü•á' : index === 1 ? 'ü•à' : index === 2 ? 'ü•â' : 'üéñÔ∏è';
      
      return `
        <div class="leader-item ${player.isCurrentPlayer ? 'current-player' : ''}" 
             onclick="showPlayerProfile('${player.name}', ${player.cards}, ${player.currency}, '${player.avatar}', ${player.isCurrentPlayer})">
          <div class="leader-info">
            <div class="leader-name">${index + 1}. ${player.name}</div>
            <div class="leader-stats">–ö–∞—Ä—Ç–æ—á–µ–∫: ${player.cards} ‚Ä¢ –ú–æ–Ω–µ—Ç: ${player.currency}</div>
          </div>
          <div class="leader-rank">${rankEmoji}</div>
        </div>
      `;
    }).join('');
  }
  
  static admin = {
    addCurrency: (amount) => {
      gameManager.data.currency += amount;
      gameManager.saveData();
      gameManager.updateUI();
      gameManager.showNotification(`–î–æ–±–∞–≤–ª–µ–Ω–æ ${amount} –º–æ–Ω–µ—Ç!`);
    },
    
    resetCollection: () => {
      gameManager.data.collection = [];
      gameManager.saveData();
      gameManager.updateUI();
      gameManager.showNotification('–ö–æ–ª–ª–µ–∫—Ü–∏—è –æ—á–∏—â–µ–Ω–∞!');
    },
    
    resetTimer: () => {
      gameManager.data.lastFreePack = 0;
      gameManager.saveData();
      gameManager.showNotification('–¢–∞–π–º–µ—Ä —Å–±—Ä–æ—à–µ–Ω!');
    }
  };
}

// –ú–ï–ù–ï–î–ñ–ï–† –ú–ï–ù–Æ
class MenuManager {
  static activeMenu = null;
  
  static toggle(menuType) {
    if (this.activeMenu === menuType) {
      this.close(menuType);
    } else {
      this.closeAll();
      this.open(menuType);
    }
  }
  
  static open(menuType) {
    const modal = document.getElementById(`${menuType}Modal`);
    if (modal) {
      modal.style.display = 'block';
      this.activeMenu = menuType;
      
      // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏
      document.querySelectorAll('#navbar button').forEach(btn => btn.classList.remove('active'));
      document.querySelector(`#navbar button[onclick*="${menuType}"]`)?.classList.add('active');
      
      // –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –º–µ–Ω—é
      if (menuType === 'profile') {
        gameManager.displayProfileCollection();
        showCurrentProfile(); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞
      } else if (menuType === 'leaderboard') {
        gameManager.loadLeaderboard();
      }
    }
  }
  
  static close(menuType) {
    const modal = document.getElementById(`${menuType}Modal`);
    if (modal) {
      modal.style.display = 'none';
      this.activeMenu = null;
      
      // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
      document.querySelectorAll('#navbar button').forEach(btn => btn.classList.remove('active'));
    }
  }
  
  static closeAll() {
    document.querySelectorAll('.menu-modal').forEach(modal => {
      modal.style.display = 'none';
    });
    document.querySelectorAll('#navbar button').forEach(btn => btn.classList.remove('active'));
    this.activeMenu = null;
  }
}

// –ú–ï–ù–ï–î–ñ–ï–† –ü–ê–ö–û–í
class PackManager {
  static buyCommonPack() {
    if (gameManager.data.currency < 30) {
      gameManager.showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!');
      return;
    }
    
    gameManager.data.currency -= 30;
    const newCard = gameManager.generateRandomCard(0);
    gameManager.data.collection.push(newCard);
    gameManager.saveData();
    gameManager.updateUI();
    gameManager.displayNewCard(newCard);
    gameManager.showNotification(`–ü–æ–ª—É—á–µ–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞: ${newCard.name}!`);
  }
  
  static buyRarePack() {
    if (gameManager.data.currency < 100) {
      gameManager.showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!');
      return;
    }
    
    gameManager.data.currency -= 100;
    const newCard = gameManager.generateRandomCard(20);
    gameManager.data.collection.push(newCard);
    gameManager.saveData();
    gameManager.updateUI();
    gameManager.displayNewCard(newCard);
    gameManager.showNotification(`–ü–æ–ª—É—á–µ–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞: ${newCard.name}!`);
  }
  
  static buyLegendaryPack() {
    if (gameManager.data.currency < 300) {
      gameManager.showNotification('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!');
      return;
    }
    
    gameManager.data.currency -= 300;
    const newCard = gameManager.generateRandomCard(40);
    gameManager.data.collection.push(newCard);
    gameManager.saveData();
    gameManager.updateUI();
    gameManager.displayNewCard(newCard);
    gameManager.showNotification(`–ü–æ–ª—É—á–µ–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞: ${newCard.name}!`);
  }
}

// –ú–ï–ù–ï–î–ñ–ï–† –ö–õ–ò–ö–ï–†–ê
class ClickerManager {
  static isVideoPlaying = false;
  static videoQueue = 0;
  
  static earnClick() {
    if (gameManager.data.energy <= 0) {
      gameManager.showNotification('–≠–Ω–µ—Ä–≥–∏—è –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å!');
      return;
    }
    
    gameManager.data.energy--;
    gameManager.data.currency += Math.floor(Math.random() * 5) + 1;
    gameManager.saveData();
    gameManager.updateUI();
    
    // –≠—Ñ—Ñ–µ–∫—Ç –∫–ª–∏–∫–∞
    const catContainer = document.querySelector('.cat-container');
    catContainer.classList.add('click-effect');
    setTimeout(() => catContainer.classList.remove('click-effect'), 300);
    
    // –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 3: –£–ª—É—á—à–µ–Ω–Ω–æ–µ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –≤–∏–¥–µ–æ
    this.playVideo();
  }
  
  static async playVideo() {
    const video = document.getElementById('catVideo');
    
    if (!video) return;
    
    // –ï—Å–ª–∏ –≤–∏–¥–µ–æ —É–∂–µ –∏–≥—Ä–∞–µ—Ç, –¥–æ–±–∞–≤–ª—è–µ–º –≤ –æ—á–µ—Ä–µ–¥—å
    if (this.isVideoPlaying) {
      this.videoQueue++;
      return;
    }
    
    try {
      this.isVideoPlaying = true;
      
      // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –≤–∏–¥–µ–æ –≤ –Ω–∞—á–∞–ª–æ
      video.currentTime = 0;
      
      // –í–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º –≤–∏–¥–µ–æ
      const playPromise = video.play();
      
      if (playPromise !== undefined) {
        await playPromise;
        
        // –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
        setTimeout(() => {
          video.pause();
          video.currentTime = 0;
          this.isVideoPlaying = false;
          
          // –ï—Å–ª–∏ –µ—Å—Ç—å –æ—á–µ—Ä–µ–¥—å, –≤–æ—Å–ø—Ä–æ–∏–∑–≤–æ–¥–∏–º —Å–ª–µ–¥—É—é—â–µ–µ
          if (this.videoQueue > 0) {
            this.videoQueue--;
            setTimeout(() => this.playVideo(), 100);
          }
        }, 1000);
      } else {
        this.isVideoPlaying = false;
      }
    } catch (error) {
      console.log('–û—à–∏–±–∫–∞ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è –≤–∏–¥–µ–æ:', error);
      this.isVideoPlaying = false;
    }
  }
}

// –§–£–ù–ö–¶–ò–ò –î–õ–Ø HTML
function openPack() {
  gameManager.openPack('free');
}

function buyPack() {
  gameManager.openPack('paid');
}

function openProfile() {
  MenuManager.toggle('profile');
}

// –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 2: –ö–∞—Å—Ç–æ–º–Ω–æ–µ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Å–º–µ–Ω—ã –∏–º–µ–Ω–∏
function showNameModal() {
  const modal = document.getElementById('nameModal');
  const input = document.getElementById('nameInput');
  input.value = gameManager.data.playerName;
  modal.style.display = 'flex';
  setTimeout(() => input.focus(), 100);
}

function closeNameModal() {
  document.getElementById('nameModal').style.display = 'none';
}

function confirmNameChange() {
  const input = document.getElementById('nameInput');
  const newName = input.value.trim();
  
  if (newName && newName.length > 0 && newName.length <= 20) {
    gameManager.data.playerName = newName;
    gameManager.saveData();
    gameManager.updateUI();
    gameManager.showNotification('–ò–º—è –∏–∑–º–µ–Ω–µ–Ω–æ!');
    closeNameModal();
  } else {
    gameManager.showNotification('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏–º—è (1-20 —Å–∏–º–≤–æ–ª–æ–≤)!');
  }
}

function changeAvatar() {
  document.getElementById('avatarInput').click();
}

function handleAvatarUpload(event) {
  const file = event.target.files[0];
  if (file && file.type.startsWith('image/')) {
    const reader = new FileReader();
    reader.onload = function(e) {
      gameManager.data.playerAvatar = e.target.result;
      gameManager.saveData();
      gameManager.updateUI();
      gameManager.showNotification('–ê–≤–∞—Ç–∞—Ä –∏–∑–º–µ–Ω–µ–Ω!');
    };
    reader.readAsDataURL(file);
  }
}

// –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï 4: –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ—Ñ–∏–ª—è–º–∏ –∏–≥—Ä–æ–∫–æ–≤
function showPlayerProfile(name, cards, currency, avatar, isCurrentPlayer) {
  if (isCurrentPlayer) {
    // –ï—Å–ª–∏ —ç—Ç–æ —Ç–µ–∫—É—â–∏–π –∏–≥—Ä–æ–∫, –ø—Ä–æ—Å—Ç–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ –ø—Ä–æ—Ñ–∏–ª—å
    showCurrentProfile();
    return;
  }
  
  // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ—Ñ–∏–ª—å –¥—Ä—É–≥–æ–≥–æ –∏–≥—Ä–æ–∫–∞
  const otherProfile = document.getElementById('otherPlayerProfile');
  const currentProfile = document.getElementById('currentPlayerProfile');
  
  // –ó–∞–ø–æ–ª–Ω—è–µ–º –¥–∞–Ω–Ω—ã–º–∏ –¥—Ä—É–≥–æ–≥–æ –∏–≥—Ä–æ–∫–∞
  document.getElementById('otherProfileName').textContent = name;
  document.getElementById('otherProfileCurrency').textContent = currency;
  document.getElementById('otherProfileCards').textContent = cards;
  document.getElementById('otherProfileAvatar').src = avatar;
  
  // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–ª–ª–µ–∫—Ü–∏—é –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –∏–≥—Ä–æ–∫–∞
  gameManager.displayOtherPlayerCollection({ name, cards, currency, avatar });
  
  // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
  currentProfile.style.display = 'none';
  otherProfile.style.display = 'block';
}

function showCurrentProfile() {
  const otherProfile = document.getElementById('otherPlayerProfile');
  const currentProfile = document.getElementById('currentPlayerProfile');
  
  currentProfile.style.display = 'block';
  otherProfile.style.display = 'none';
  
  // –û–±–Ω–æ–≤–ª—è–µ–º –∫–æ–ª–ª–µ–∫—Ü–∏—é —Ç–µ–∫—É—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞
  gameManager.displayProfileCollection();
}

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è Enter –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞ –∏–º–µ–Ω–∏
document.addEventListener('DOMContentLoaded', () => {
  const nameInput = document.getElementById('nameInput');
  if (nameInput) {
    nameInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') {
        confirmNameChange();
      }
    });
  }
});

// –î–æ–±–∞–≤–ª—è–µ–º —Å—Ç–∏–ª–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
const style = document.createElement('style');
style.textContent = `
@keyframes slideDown {
  from { transform: translateX(-50%) translateY(-100px); opacity: 0; }
  to { transform: translateX(-50%) translateY(0); opacity: 1; }
}
`;
document.head.appendChild(style);

// –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –ò–ì–†–´
const gameManager = new GameManager();

// –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω –ø–æ –∫–ª–∏–∫—É –≤–Ω–µ –Ω–∏—Ö
document.addEventListener('click', (e) => {
  if (e.target.classList.contains('menu-modal')) {
    MenuManager.closeAll();
  }
  
  // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å–º–µ–Ω—ã –∏–º–µ–Ω–∏
  if (e.target.id === 'nameModal') {
    closeNameModal();
  }
});

// –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') {
    MenuManager.closeAll();
    gameManager.closeCardModal();
    closeNameModal();
  }
});

console.log('üéÆ Reghype Card Game –∑–∞–≥—Ä—É–∂–µ–Ω!');
console.log('üîë –î–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏—é: ‚Üë‚Üë‚Üì‚Üì‚Üê‚Üí‚Üê‚ÜíBA');
console.log('üÜî ID –∏–≥—Ä–æ–∫–∞:', gameManager.playerId);
console.log('üë§ –ò–º—è –∏–≥—Ä–æ–∫–∞:', gameManager.data.playerName);

// –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –¥–ª—è –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞ (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏)
if (window.location.hostname === 'localhost' || window.location.hostname === '127.0.0.1') {
  const debugButton = document.createElement('button');
  debugButton.textContent = 'üîÑ –û–±–Ω–æ–≤–∏—Ç—å –ª–∏–¥–µ—Ä–±–æ—Ä–¥';
  debugButton.style.cssText = `
    position: fixed;
    top: 10px;
    left: 10px;
    z-index: 9999;
    padding: 5px 10px;
    font-size: 12px;
    background: #ff6600;
    border: none;
    border-radius: 5px;
    color: white;
  `;
  debugButton.onclick = () => {
    console.log('üîÑ –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ª–∏–¥–µ—Ä–±–æ—Ä–¥–∞...');
    gameManager.loadLeaderboard();
  };
  document.body.appendChild(debugButton);
}
</script>
</body>
</html>
